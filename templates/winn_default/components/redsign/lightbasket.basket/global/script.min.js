!function(t,e,a){"use strict";var s;(t.RS||(t.RS={}),t.RS.GlobalCart)||(RS.GlobalBasket=function(t,e,s,i){this.itemRemoved=!1,this.siteId=t,this.templateName=e,this.arParams=i,this.ajaxPath=s,a.addCustomEvent("add2basket.rs_lightbasket",$.proxy(this.refresh,this)),a.addCustomEvent("clear.rs_lightbasket",$.proxy(this.refresh,this)),a.addCustomEvent("delete.rs_lightbasket",$.proxy(this.refresh,this)),a.addCustomEvent("update.rs_lightbasket",$.proxy(this.refresh,this))},RS.GlobalBasket.init=function(i,r,o,d){return s||(s=new RS.GlobalBasket(i,r,o,d)),a.addCustomEvent(t,"OnBasketChange",function(){var t=e.querySelectorAll('.js-global-cart[data-type="ajax"][data-need-cache="Y"]');if(void 0!==t)for(var a=0;a<t.length;a++)t[a].setAttribute("data-need-reload","Y")}),s},RS.GlobalBasket.prototype={refresh:function(t){this.itemRemoved?this.itemRemoved=!1:((t=t||{}).action="get",t.sessid=a.bitrix_sessid(),t.siteId=this.siteId,t.templateName=this.templateName,t.arParams=this.arParams,a.ajax({url:this.ajaxPath,method:"POST",dataType:"json",data:t,onsuccess:this.updateBlocks}))},updateBlocks:function(t){var s=e.querySelectorAll(".js-global-cart");if(void 0!==s)for(var i=0;i<s.length;i++){var r=s[i],o=(r.querySelector(".js-global-cart__count"),a.findParent(r,{attribute:{"data-fab-menu-btn":""}},!0));t.COUNT>0?(r.classList.add("has-items"),o&&o.classList.add("fab__menu-btn--visible")):r.classList.remove("has-items")}}})}(window,document,BX);